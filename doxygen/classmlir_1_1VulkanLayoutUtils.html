<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: mlir::VulkanLayoutUtils Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MLIR<span id="projectnumber">&#160;22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="namespacemlir.html">mlir</a></li><li class="navelem"><a href="classmlir_1_1VulkanLayoutUtils.html">VulkanLayoutUtils</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classmlir_1_1VulkanLayoutUtils-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mlir::VulkanLayoutUtils Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>According to the Vulkan spec "15.6.4. Offset and Stride Assignment": "There are different alignment requirements depending on the specific resources and on the features enabled on the device.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="LayoutUtils_8h_source.html">mlir/Dialect/SPIRV/Utils/LayoutUtils.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-types" class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afe03b80d87ead770c66fd52417c60df5" id="r_afe03b80d87ead770c66fd52417c60df5"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe03b80d87ead770c66fd52417c60df5">Size</a> = uint64_t</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-static-methods" class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6a1d1ceb797034440b8a773e5217ea5c" id="r_a6a1d1ceb797034440b8a773e5217ea5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1spirv_1_1StructType.html">spirv::StructType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a1d1ceb797034440b8a773e5217ea5c">decorateType</a> (<a class="el" href="classmlir_1_1spirv_1_1StructType.html">spirv::StructType</a> structType)</td></tr>
<tr class="memdesc:a6a1d1ceb797034440b8a773e5217ea5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new StructType with layout decoration.  <br /></td></tr>
<tr class="memitem:a46678ddf7a11ae6a314ffe5e234a4f05" id="r_a46678ddf7a11ae6a314ffe5e234a4f05"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46678ddf7a11ae6a314ffe5e234a4f05">isLegalType</a> (<a class="el" href="classmlir_1_1Type.html">Type</a> type)</td></tr>
<tr class="memdesc:a46678ddf7a11ae6a314ffe5e234a4f05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether a type is legal in terms of Vulkan layout info decoration.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>According to the Vulkan spec "15.6.4. Offset and Stride Assignment": "There are different alignment requirements depending on the specific resources and on the features enabled on the device. </p>
<p>"

There are 3 types of alignment: scalar, base, extended.
See the spec for details.

Note: Even if scalar alignment is supported, it is generally more
performant to use the base alignment. So here the calculation is based on
base alignment.

The memory layout must obey the following rules:
1. The Offset decoration of any member must be a multiple of its alignment.
2. Any ArrayStride or MatrixStride decoration must be a multiple of the
alignment of the array or matrix as defined above.

According to the SPIR-V spec:
"The ArrayStride, MatrixStride, and Offset decorations must be large enough to hold the size of the objects they affect (that is, specifying overlap is invalid)." </p>

<p class="definition">Definition at line <a class="el" href="LayoutUtils_8h_source.html#l00050">50</a> of file <a class="el" href="LayoutUtils_8h_source.html">LayoutUtils.h</a>.</p>
</div><a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Member Typedef Documentation</h2>
<a id="afe03b80d87ead770c66fd52417c60df5" name="afe03b80d87ead770c66fd52417c60df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe03b80d87ead770c66fd52417c60df5">&#9670;&#160;</a></span>Size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#afe03b80d87ead770c66fd52417c60df5">mlir::VulkanLayoutUtils::Size</a> = uint64_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LayoutUtils_8h_source.html#l00052">52</a> of file <a class="el" href="LayoutUtils_8h_source.html">LayoutUtils.h</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a6a1d1ceb797034440b8a773e5217ea5c" name="a6a1d1ceb797034440b8a773e5217ea5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a1d1ceb797034440b8a773e5217ea5c">&#9670;&#160;</a></span>decorateType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1spirv_1_1StructType.html">spirv::StructType</a> VulkanLayoutUtils::decorateType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1spirv_1_1StructType.html">spirv::StructType</a></td>          <td class="paramname"><span class="paramname"><em>structType</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a new StructType with layout decoration. </p>

<p class="definition">Definition at line <a class="el" href="LayoutUtils_8cpp_source.html#l00020">20</a> of file <a class="el" href="LayoutUtils_8cpp_source.html">LayoutUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="LayoutUtils_8cpp_source.html#l00020">decorateType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="SPIRVToLLVM_8cpp_source.html#l00195">convertStructTypeWithOffset()</a>, <a class="el" href="LowerABIAttributesPass_8cpp_source.html#l00038">createGlobalVarForEntryPointArgument()</a>, and <a class="el" href="LayoutUtils_8cpp_source.html#l00020">decorateType()</a>.</p>

</div>
</div>
<a id="a46678ddf7a11ae6a314ffe5e234a4f05" name="a46678ddf7a11ae6a314ffe5e234a4f05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46678ddf7a11ae6a314ffe5e234a4f05">&#9670;&#160;</a></span>isLegalType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> VulkanLayoutUtils::isLegalType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Type.html">Type</a></td>          <td class="paramname"><span class="paramname"><em>type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether a type is legal in terms of Vulkan layout info decoration. </p>
<p>A type is dynamically illegal if it's a composite type in the StorageBuffer, PhysicalStorageBuffer, Uniform, and PushConstant Storage Classes without layout information. </p>

<p class="definition">Definition at line <a class="el" href="LayoutUtils_8cpp_source.html#l00183">183</a> of file <a class="el" href="LayoutUtils_8cpp_source.html">LayoutUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="SPIRVTypes_8cpp_source.html#l01065">mlir::spirv::StructType::getNumElements()</a>, and <a class="el" href="SPIRVTypes_8cpp_source.html#l01077">mlir::spirv::StructType::hasOffset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="DecorateCompositeTypeLayoutPass_8cpp_source.html#l00138">mlir::spirv::impl::SPIRVCompositeTypeLayoutPassBase&lt; DerivedT &gt;::clonePass()</a>, and <a class="el" href="DecorateCompositeTypeLayoutPass_8cpp_source.html#l00130">mlir::spirv::impl::SPIRVCompositeTypeLayoutPassBase&lt; DerivedT &gt;::getName()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/mlir/Dialect/SPIRV/Utils/<a class="el" href="LayoutUtils_8h_source.html">LayoutUtils.h</a></li>
<li>lib/Dialect/SPIRV/Utils/<a class="el" href="LayoutUtils_8cpp_source.html">LayoutUtils.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
