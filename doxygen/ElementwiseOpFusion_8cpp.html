<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/Linalg/Transforms/ElementwiseOpFusion.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_8edb792440615361a0811a7329611599.html">Linalg</a></li><li class="navelem"><a class="el" href="dir_7e2f808e77498894ca0efbd745da2201.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ElementwiseOpFusion.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="Dialect_2Linalg_2Passes_8h_source.html">mlir/Dialect/Linalg/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineOps_8h_source.html">mlir/Dialect/Affine/IR/AffineOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Arith_2IR_2Arith_8h_source.html">mlir/Dialect/Arith/IR/Arith.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2Arith_2Utils_2Utils_8h_source.html">mlir/Dialect/Arith/Utils/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Linalg_2IR_2Linalg_8h_source.html">mlir/Dialect/Linalg/IR/Linalg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Linalg_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Linalg/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2SparseTensor_2IR_2SparseTensor_8h_source.html">mlir/Dialect/SparseTensor/IR/SparseTensor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Tensor_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Tensor/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2IR_2AffineExpr_8h_source.html">mlir/IR/AffineExpr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2IR_2AffineMap_8h_source.html">mlir/IR/AffineMap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Matchers_8h_source.html">mlir/IR/Matchers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="PatternMatch_8h_source.html">mlir/IR/PatternMatch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Support_2LLVM_8h_source.html">mlir/Support/LLVM.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="GreedyPatternRewriteDriver_8h_source.html">mlir/Transforms/GreedyPatternRewriteDriver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="RegionUtils_8h_source.html">mlir/Transforms/RegionUtils.h</a>&quot;</code><br />
<code>#include &lt;optional&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &quot;mlir/Dialect/Linalg/Passes.h.inc&quot;</code><br />
</div>
<p><a href="ElementwiseOpFusion_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacemlir"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir.html">mlir</a></td></tr>
<tr class="memdesc:namespacemlir"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include the generated interface declarations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a286fd5c13e0d72fb5b3a911e031e6b09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a286fd5c13e0d72fb5b3a911e031e6b09">GEN_PASS_DEF_LINALGELEMENTWISEOPFUSIONPASS</a></td></tr>
<tr class="separator:a286fd5c13e0d72fb5b3a911e031e6b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a19679bdb1cb388e2cf93c2dab27ffe52"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a19679bdb1cb388e2cf93c2dab27ffe52">getIndexingMapOfProducerOperandsInCoordinatesOfFusedOp</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *producerOpOperand, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> producerResultIndexMap, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> fusedConsumerArgIndexMap)</td></tr>
<tr class="memdesc:a19679bdb1cb388e2cf93c2dab27ffe52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append to <code>fusedOpIndexingMapAttrs</code> the indexing maps for the operands of the <code>producer</code> to use in the fused operation given the indexing map of the result of the producer in the consumer.  <a href="ElementwiseOpFusion_8cpp.html#a19679bdb1cb388e2cf93c2dab27ffe52">More...</a><br /></td></tr>
<tr class="separator:a19679bdb1cb388e2cf93c2dab27ffe52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e49a564904350d70c1b118d3dfb0f6c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a0e49a564904350d70c1b118d3dfb0f6c">isOpOperandCanBeDroppedAfterFusedLinalgs</a> (GenericOp producer, GenericOp consumer, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; opOperandsToIgnore)</td></tr>
<tr class="separator:a0e49a564904350d70c1b118d3dfb0f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9250ab0e524e1c917e7ea17e5ca6e1b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#ad9250ab0e524e1c917e7ea17e5ca6e1b">generateFusedElementwiseOpRegion</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, GenericOp fusedOp, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> consumerToProducerLoopsMap, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *fusedOperand, unsigned nloops, llvm::SmallDenseSet&lt; int &gt; &amp;preservedProducerResults)</td></tr>
<tr class="memdesc:ad9250ab0e524e1c917e7ea17e5ca6e1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the region of the fused tensor operation.  <a href="ElementwiseOpFusion_8cpp.html#ad9250ab0e524e1c917e7ea17e5ca6e1b">More...</a><br /></td></tr>
<tr class="separator:ad9250ab0e524e1c917e7ea17e5ca6e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec57ac31270575195e36ab2ecf09b61"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a8ec57ac31270575195e36ab2ecf09b61">isFusableWithReshapeByDimExpansion</a> (LinalgOp linalgOp, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *fusableOpOperand)</td></tr>
<tr class="memdesc:a8ec57ac31270575195e36ab2ecf09b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditions for folding a structured linalg operation with a reshape op by expanding the iteration space dimensionality for tensor operations.  <a href="ElementwiseOpFusion_8cpp.html#a8ec57ac31270575195e36ab2ecf09b61">More...</a><br /></td></tr>
<tr class="separator:a8ec57ac31270575195e36ab2ecf09b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff1bcc53176a04b539b16e59cbac323e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#aff1bcc53176a04b539b16e59cbac323e">getIndexingMapInExpandedOp</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, const ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="memdesc:aff1bcc53176a04b539b16e59cbac323e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the indexing map to use in the expanded op for a given the <code>indexingMap</code> of the original operation.  <a href="ElementwiseOpFusion_8cpp.html#aff1bcc53176a04b539b16e59cbac323e">More...</a><br /></td></tr>
<tr class="separator:aff1bcc53176a04b539b16e59cbac323e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ecc131667ad822fa76bb3b7d63fab9"><td class="memItemLeft" align="right" valign="top">static std::tuple&lt; <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt;, RankedTensorType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a31ecc131667ad822fa76bb3b7d63fab9">getExpandedShapeAndType</a> (RankedTensorType originalType, <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, const ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="memdesc:a31ecc131667ad822fa76bb3b7d63fab9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the shape and type of the operand/result to use in the expanded op given the type in the original op.  <a href="ElementwiseOpFusion_8cpp.html#a31ecc131667ad822fa76bb3b7d63fab9">More...</a><br /></td></tr>
<tr class="separator:a31ecc131667ad822fa76bb3b7d63fab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaf23f77744995b559eea5f6f3beec3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#adaaf23f77744995b559eea5f6f3beec3">getReassociationForExpansion</a> (<a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, const ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="memdesc:adaaf23f77744995b559eea5f6f3beec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reassociation maps to use in the <code>tensor.expand_shape</code> operation to convert the operands of the original operation to operands of the expanded operation.  <a href="ElementwiseOpFusion_8cpp.html#adaaf23f77744995b559eea5f6f3beec3">More...</a><br /></td></tr>
<tr class="separator:adaaf23f77744995b559eea5f6f3beec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a500dd0360de9862e17d177987cb5a3f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a500dd0360de9862e17d177987cb5a3f5">updateExpandedGenericOpRegion</a> (<a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;rewriter, <a class="el" href="classmlir_1_1Location.html">Location</a> loc, <a class="el" href="classmlir_1_1Region.html">Region</a> &amp;fusedRegion, const ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="memdesc:a500dd0360de9862e17d177987cb5a3f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the body of an expanded linalg operation having index semantics.  <a href="ElementwiseOpFusion_8cpp.html#a500dd0360de9862e17d177987cb5a3f5">More...</a><br /></td></tr>
<tr class="separator:a500dd0360de9862e17d177987cb5a3f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3197cdc89465746d74584179734c41"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a1b3197cdc89465746d74584179734c41">createExpandedTransposeOp</a> (<a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;rewriter, TransposeOp transposeOp, <a class="el" href="classmlir_1_1Value.html">Value</a> expandedInput, <a class="el" href="classmlir_1_1Value.html">Value</a> output, ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="separator:a1b3197cdc89465746d74584179734c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661ddebe4e41e844db2ddf2dae695893"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a661ddebe4e41e844db2ddf2dae695893">createExpandedGenericOp</a> (<a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;rewriter, LinalgOp linalgOp, <a class="el" href="classmlir_1_1TypeRange.html">TypeRange</a> resultTypes, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;expandedOpOperands, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; outputs, ExpansionInfo &amp;expansionInfo, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> &gt; expandedOpIndexingMaps)</td></tr>
<tr class="separator:a661ddebe4e41e844db2ddf2dae695893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b7be6c2347ccc6222e3cfb12242dc4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#ac4b7be6c2347ccc6222e3cfb12242dc4">createExpandedOp</a> (<a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;rewriter, LinalgOp linalgOp, <a class="el" href="classmlir_1_1TypeRange.html">TypeRange</a> resultTypes, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; expandedOpOperands, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; outputs, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> &gt; expandedOpIndexingMaps, ExpansionInfo &amp;expansionInfo)</td></tr>
<tr class="separator:ac4b7be6c2347ccc6222e3cfb12242dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb283ef7e680f5fd5f4c764179afe330"><td class="memItemLeft" align="right" valign="top">static std::optional&lt; <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#acb283ef7e680f5fd5f4c764179afe330">fuseWithReshapeByExpansion</a> (LinalgOp linalgOp, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *reshapeOp, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *fusableOpOperand, <a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;rewriter)</td></tr>
<tr class="memdesc:acb283ef7e680f5fd5f4c764179afe330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the fusion of a tensor.collapse_shape or a tensor.expand_shape op and a generic op as explained in <code>isFusableWithReshapeByExpansion</code>.  <a href="ElementwiseOpFusion_8cpp.html#acb283ef7e680f5fd5f4c764179afe330">More...</a><br /></td></tr>
<tr class="separator:acb283ef7e680f5fd5f4c764179afe330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d43306dd817ce8b48fe47442c5dc81"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#ac4d43306dd817ce8b48fe47442c5dc81">getDomainReassociation</a> (<a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, <a class="el" href="namespacemlir.html#a7ed845b40509fa999492a04654211321">ReassociationIndicesRef</a> rangeReassociation)</td></tr>
<tr class="memdesc:ac4d43306dd817ce8b48fe47442c5dc81"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given list of indices in the range of the <code>indexingMap</code> that are folded, return the indices of the corresponding domain.  <a href="ElementwiseOpFusion_8cpp.html#ac4d43306dd817ce8b48fe47442c5dc81">More...</a><br /></td></tr>
<tr class="separator:ac4d43306dd817ce8b48fe47442c5dc81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fb4f1d11a1227dc7fac2dda15a7305"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#ac9fb4f1d11a1227dc7fac2dda15a7305">getCollapsableIterationSpaceDims</a> (GenericOp genericOp, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *fusableOperand, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> &gt; reassociation)</td></tr>
<tr class="separator:ac9fb4f1d11a1227dc7fac2dda15a7305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378af4e3b09807609f063972a9e82860"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; utils::IteratorType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a378af4e3b09807609f063972a9e82860">getCollapsedOpIteratorTypes</a> (<a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; utils::IteratorType &gt; iteratorTypes, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:a378af4e3b09807609f063972a9e82860"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the iterator types for the collapsed operation given the original iterator types and collapsed dimensions.  <a href="ElementwiseOpFusion_8cpp.html#a378af4e3b09807609f063972a9e82860">More...</a><br /></td></tr>
<tr class="separator:a378af4e3b09807609f063972a9e82860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4c97564506872801e2cf3f284f6eb8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#adf4c97564506872801e2cf3f284f6eb8">getCollapsedOpIndexingMap</a> (<a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:adf4c97564506872801e2cf3f284f6eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the indexing map in the collapsed op that corresponds to the given <code>indexingMap</code> of the original operation.  <a href="ElementwiseOpFusion_8cpp.html#adf4c97564506872801e2cf3f284f6eb8">More...</a><br /></td></tr>
<tr class="separator:adf4c97564506872801e2cf3f284f6eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a196f071bfe14a50919431c360987f346"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a196f071bfe14a50919431c360987f346">getOperandReassociation</a> (<a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> indexingMap, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:a196f071bfe14a50919431c360987f346"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the <code>reassociation</code> indices to use to collapse the operand when the iteration space of a generic op is collapsed.  <a href="ElementwiseOpFusion_8cpp.html#a196f071bfe14a50919431c360987f346">More...</a><br /></td></tr>
<tr class="separator:a196f071bfe14a50919431c360987f346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa46833a5d95d2d5b0fda085bb99038"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#affa46833a5d95d2d5b0fda085bb99038">getCollapsedOpOperand</a> (<a class="el" href="classmlir_1_1Location.html">Location</a> loc, LinalgOp op, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *opOperand, const CollapsingInfo &amp;collapsingInfo, <a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;builder)</td></tr>
<tr class="memdesc:affa46833a5d95d2d5b0fda085bb99038"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the new value to use for a given <code>OpOperand</code> in the collapsed operation.  <a href="ElementwiseOpFusion_8cpp.html#affa46833a5d95d2d5b0fda085bb99038">More...</a><br /></td></tr>
<tr class="separator:affa46833a5d95d2d5b0fda085bb99038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598f8bbbe0438554d8692471f52fb5d4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a598f8bbbe0438554d8692471f52fb5d4">generateCollapsedIndexingRegion</a> (<a class="el" href="classmlir_1_1Location.html">Location</a> loc, <a class="el" href="classmlir_1_1Block.html">Block</a> *block, const CollapsingInfo &amp;collapsingInfo, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; loopRange, <a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter)</td></tr>
<tr class="memdesc:a598f8bbbe0438554d8692471f52fb5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify the <code>linalg.index</code> operations in the original generic op, to its value in the collapsed operation.  <a href="ElementwiseOpFusion_8cpp.html#a598f8bbbe0438554d8692471f52fb5d4">More...</a><br /></td></tr>
<tr class="separator:a598f8bbbe0438554d8692471f52fb5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffd14cdaae08d4017dc2549b07e2846"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a9ffd14cdaae08d4017dc2549b07e2846">collapseOperandsAndResults</a> (LinalgOp op, const CollapsingInfo &amp;collapsingInfo, <a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;inputOperands, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;outputOperands, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Type.html">Type</a> &gt; &amp;resultTypes)</td></tr>
<tr class="separator:a9ffd14cdaae08d4017dc2549b07e2846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ad4179cbf3224adf2db4efec074b35"><td class="memTemplParams" colspan="2">template&lt;typename OpTy &gt; </td></tr>
<tr class="memitem:a11ad4179cbf3224adf2db4efec074b35"><td class="memTemplItemLeft" align="right" valign="top">OpTy&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a11ad4179cbf3224adf2db4efec074b35">cloneToCollapsedOp</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, OpTy origOp, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:a11ad4179cbf3224adf2db4efec074b35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone a <code>LinalgOp</code> to a collapsed version of same name.  <a href="ElementwiseOpFusion_8cpp.html#a11ad4179cbf3224adf2db4efec074b35">More...</a><br /></td></tr>
<tr class="separator:a11ad4179cbf3224adf2db4efec074b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1a605aab0a2bcc18edd852e6cf1996"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:afc1a605aab0a2bcc18edd852e6cf1996"><td class="memTemplItemLeft" align="right" valign="top">LinalgOp&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#afc1a605aab0a2bcc18edd852e6cf1996">cloneToCollapsedOp&lt; LinalgOp &gt;</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, LinalgOp origOp, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:afc1a605aab0a2bcc18edd852e6cf1996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collapse any <code>LinalgOp</code> that does not require any specialization such as indexing_maps, iterator_types, etc.  <a href="ElementwiseOpFusion_8cpp.html#afc1a605aab0a2bcc18edd852e6cf1996">More...</a><br /></td></tr>
<tr class="separator:afc1a605aab0a2bcc18edd852e6cf1996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759134b025a62b0aceb88a89910cd56d"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:a759134b025a62b0aceb88a89910cd56d"><td class="memTemplItemLeft" align="right" valign="top">GenericOp&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#a759134b025a62b0aceb88a89910cd56d">cloneToCollapsedOp&lt; GenericOp &gt;</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, GenericOp origOp, const CollapsingInfo &amp;collapsingInfo)</td></tr>
<tr class="memdesc:a759134b025a62b0aceb88a89910cd56d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collapse a <code>GenericOp</code>  <a href="ElementwiseOpFusion_8cpp.html#a759134b025a62b0aceb88a89910cd56d">More...</a><br /></td></tr>
<tr class="separator:a759134b025a62b0aceb88a89910cd56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefb3a78c82370e630220bbb07693e6a9"><td class="memItemLeft" align="right" valign="top">LinalgOp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ElementwiseOpFusion_8cpp.html#aefb3a78c82370e630220bbb07693e6a9">createCollapsedOp</a> (LinalgOp op, const CollapsingInfo &amp;collapsingInfo, <a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter)</td></tr>
<tr class="separator:aefb3a78c82370e630220bbb07693e6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a286fd5c13e0d72fb5b3a911e031e6b09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a286fd5c13e0d72fb5b3a911e031e6b09">&#9670;&nbsp;</a></span>GEN_PASS_DEF_LINALGELEMENTWISEOPFUSIONPASS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GEN_PASS_DEF_LINALGELEMENTWISEOPFUSIONPASS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00033">33</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11ad4179cbf3224adf2db4efec074b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ad4179cbf3224adf2db4efec074b35">&#9670;&nbsp;</a></span>cloneToCollapsedOp()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OpTy &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">OpTy cloneToCollapsedOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OpTy&#160;</td>
          <td class="paramname"><em>origOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clone a <code>LinalgOp</code> to a collapsed version of same name. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01654">1654</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01702">createCollapsedOp()</a>.</p>

</div>
</div>
<a id="a759134b025a62b0aceb88a89910cd56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759134b025a62b0aceb88a89910cd56d">&#9670;&nbsp;</a></span>cloneToCollapsedOp&lt; GenericOp &gt;()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">GenericOp <a class="el" href="ElementwiseOpFusion_8cpp.html#a11ad4179cbf3224adf2db4efec074b35">cloneToCollapsedOp</a>&lt; GenericOp &gt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GenericOp&#160;</td>
          <td class="paramname"><em>origOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collapse a <code>GenericOp</code> </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01676">1676</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01625">collapseOperandsAndResults()</a>, <a class="el" href="Block_8h_source.html#l00153">mlir::Block::front()</a>, <a class="el" href="Block_8h_source.html#l00087">mlir::Block::getArguments()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01488">getCollapsedOpIteratorTypes()</a>, and <a class="el" href="PatternMatch_8cpp_source.html#l00343">mlir::RewriterBase::mergeBlocks()</a>.</p>

</div>
</div>
<a id="afc1a605aab0a2bcc18edd852e6cf1996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1a605aab0a2bcc18edd852e6cf1996">&#9670;&nbsp;</a></span>cloneToCollapsedOp&lt; LinalgOp &gt;()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LinalgOp <a class="el" href="ElementwiseOpFusion_8cpp.html#a11ad4179cbf3224adf2db4efec074b35">cloneToCollapsedOp</a>&lt; LinalgOp &gt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>origOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collapse any <code>LinalgOp</code> that does not require any specialization such as indexing_maps, iterator_types, etc. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01662">1662</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="StructuredOpsUtils_8cpp_source.html#l00197">mlir::clone()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01625">collapseOperandsAndResults()</a>.</p>

</div>
</div>
<a id="a9ffd14cdaae08d4017dc2549b07e2846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ffd14cdaae08d4017dc2549b07e2846">&#9670;&nbsp;</a></span>collapseOperandsAndResults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void collapseOperandsAndResults </td>
          <td>(</td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputOperands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>outputOperands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Type.html">Type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>resultTypes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01625">1625</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01558">getCollapsedOpOperand()</a>, and <a class="el" href="Value_8h_source.html#l00105">mlir::Value::getType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01676">cloneToCollapsedOp&lt; GenericOp &gt;()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01662">cloneToCollapsedOp&lt; LinalgOp &gt;()</a>.</p>

</div>
</div>
<a id="aefb3a78c82370e630220bbb07693e6a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefb3a78c82370e630220bbb07693e6a9">&#9670;&nbsp;</a></span>createCollapsedOp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LinalgOp createCollapsedOp </td>
          <td>(</td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01702">1702</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01654">cloneToCollapsedOp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01712">mlir::linalg::collapseOpIterationDims()</a>.</p>

</div>
</div>
<a id="a661ddebe4e41e844db2ddf2dae695893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a661ddebe4e41e844db2ddf2dae695893">&#9670;&nbsp;</a></span>createExpandedGenericOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Operation.html">Operation</a>* createExpandedGenericOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1TypeRange.html">TypeRange</a>&#160;</td>
          <td class="paramname"><em>resultTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>expandedOpOperands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt;&#160;</td>
          <td class="paramname"><em>outputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> &gt;&#160;</td>
          <td class="paramname"><em>expandedOpIndexingMaps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00805">805</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Region_8h_source.html#l00055">mlir::Region::begin()</a>, <a class="el" href="Builders_8cpp_source.html#l00575">mlir::OpBuilder::cloneRegionBefore()</a>, <a class="el" href="Matchers_8h_source.html#l00344">mlir::detail::enumerate()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00686">mlir::Operation::getRegion()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00730">updateExpandedGenericOpRegion()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00835">createExpandedOp()</a>.</p>

</div>
</div>
<a id="ac4b7be6c2347ccc6222e3cfb12242dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4b7be6c2347ccc6222e3cfb12242dc4">&#9670;&nbsp;</a></span>createExpandedOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Operation.html">Operation</a>* createExpandedOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1TypeRange.html">TypeRange</a>&#160;</td>
          <td class="paramname"><em>resultTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt;&#160;</td>
          <td class="paramname"><em>expandedOpOperands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt;&#160;</td>
          <td class="paramname"><em>outputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> &gt;&#160;</td>
          <td class="paramname"><em>expandedOpIndexingMaps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00835">835</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="StructuredOpsUtils_8cpp_source.html#l00197">mlir::clone()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00805">createExpandedGenericOp()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00789">createExpandedTransposeOp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00865">fuseWithReshapeByExpansion()</a>.</p>

</div>
</div>
<a id="a1b3197cdc89465746d74584179734c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b3197cdc89465746d74584179734c41">&#9670;&nbsp;</a></span>createExpandedTransposeOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Operation.html">Operation</a>* createExpandedTransposeOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TransposeOp&#160;</td>
          <td class="paramname"><em>transposeOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>expandedInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00789">789</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IndexingUtils_8cpp_source.html#l00206">mlir::invertPermutationVector()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00835">createExpandedOp()</a>.</p>

</div>
</div>
<a id="acb283ef7e680f5fd5f4c764179afe330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb283ef7e680f5fd5f4c764179afe330">&#9670;&nbsp;</a></span>fuseWithReshapeByExpansion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::optional&lt;<a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="classmlir_1_1Value.html">Value</a>&gt; &gt; fuseWithReshapeByExpansion </td>
          <td>(</td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>reshapeOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>fusableOpOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the fusion of a tensor.collapse_shape or a tensor.expand_shape op and a generic op as explained in <code>isFusableWithReshapeByExpansion</code>. </p>
<p>Assumes that those conditions have been satisfied. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00865">865</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00835">createExpandedOp()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00687">getExpandedShapeAndType()</a>, <a class="el" href="TensorOps_8cpp_source.html#l00070">mlir::tensor::getMixedSizes()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00710">getReassociationForExpansion()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00407">mlir::Operation::getResult()</a>, <a class="el" href="Builders_8h_source.html#l00089">mlir::Builder::getType()</a>, <a class="el" href="classmlir_1_1ValueRange.html#ab8f3a1aeea4da0acfaad1bc71b072017">mlir::ValueRange::getTypes()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00564">isFusableWithReshapeByDimExpansion()</a>, <a class="el" href="RegionUtils_8cpp_source.html#l01120">mlir::moveValueDefinitions()</a>, <a class="el" href="PatternMatch_8h_source.html#l00716">mlir::RewriterBase::notifyMatchFailure()</a>, <a class="el" href="ReshapeOpsUtils_8cpp_source.html#l00490">mlir::reshapeLikeShapesAreCompatible()</a>, and <a class="el" href="Builders_8h_source.html#l00396">mlir::OpBuilder::setInsertionPoint()</a>.</p>

</div>
</div>
<a id="a598f8bbbe0438554d8692471f52fb5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598f8bbbe0438554d8692471f52fb5d4">&#9670;&nbsp;</a></span>generateCollapsedIndexingRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void generateCollapsedIndexingRegion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Location.html">Location</a>&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Block.html">Block</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt;&#160;</td>
          <td class="paramname"><em>loopRange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Modify the <code>linalg.index</code> operations in the original generic op, to its value in the collapsed operation. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01586">1586</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="Builders_8h_source.html#l00517">mlir::OpBuilder::createOrFold()</a>, <a class="el" href="Matchers_8h_source.html#l00344">mlir::detail::enumerate()</a>, <a class="el" href="Block_8h_source.html#l00193">mlir::Block::getOps()</a>, <a class="el" href="Dialect_2Arith_2Utils_2Utils_8cpp_source.html#l00111">mlir::getValueOrCreateConstantIndexOp()</a>, <a class="el" href="PatternMatch_8cpp_source.html#l00127">mlir::RewriterBase::replaceOp()</a>, and <a class="el" href="Builders_8h_source.html#l00429">mlir::OpBuilder::setInsertionPointToStart()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01712">mlir::linalg::collapseOpIterationDims()</a>.</p>

</div>
</div>
<a id="ad9250ab0e524e1c917e7ea17e5ca6e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9250ab0e524e1c917e7ea17e5ca6e1b">&#9670;&nbsp;</a></span>generateFusedElementwiseOpRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void generateFusedElementwiseOpRegion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GenericOp&#160;</td>
          <td class="paramname"><em>fusedOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>consumerToProducerLoopsMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>fusedOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>nloops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::SmallDenseSet&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>preservedProducerResults</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate the region of the fused tensor operation. </p>
<p>The region of the fused op must be empty. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00218">218</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="Block_8cpp_source.html#l00153">mlir::Block::addArgument()</a>, <a class="el" href="Builders_8cpp_source.html#l00548">mlir::OpBuilder::clone()</a>, <a class="el" href="Builders_8cpp_source.html#l00425">mlir::OpBuilder::createBlock()</a>, <a class="el" href="Matchers_8h_source.html#l00344">mlir::detail::enumerate()</a>, <a class="el" href="Block_8h_source.html#l00153">mlir::Block::front()</a>, <a class="el" href="UseDefLists_8h_source.html#l00160">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="Block_8h_source.html#l00129">mlir::Block::getArgument()</a>, <a class="el" href="Block_8h_source.html#l00087">mlir::Block::getArguments()</a>, <a class="el" href="Value_8cpp_source.html#l00018">mlir::Value::getDefiningOp()</a>, <a class="el" href="Block_8h_source.html#l00128">mlir::Block::getNumArguments()</a>, <a class="el" href="Value_8cpp_source.html#l00226">mlir::OpOperand::getOperandNumber()</a>, <a class="el" href="Block_8h_source.html#l00193">mlir::Block::getOps()</a>, <a class="el" href="UseDefLists_8h_source.html#l00038">mlir::detail::IROperandBase::getOwner()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00647">mlir::AffineMap::getSubMap()</a>, <a class="el" href="Block_8cpp_source.html#l00244">mlir::Block::getTerminator()</a>, <a class="el" href="IRMapping_8h_source.html#l00065">mlir::IRMapping::lookupOrDefault()</a>, <a class="el" href="IRMapping_8h_source.html#l00030">mlir::IRMapping::map()</a>, and <a class="el" href="Block_8h_source.html#l00209">mlir::Block::without_terminator()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00339">mlir::linalg::fuseElementwiseOps()</a>.</p>

</div>
</div>
<a id="ac9fb4f1d11a1227dc7fac2dda15a7305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9fb4f1d11a1227dc7fac2dda15a7305">&#9670;&nbsp;</a></span>getCollapsableIterationSpaceDims()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a>&gt; getCollapsableIterationSpaceDims </td>
          <td>(</td>
          <td class="paramtype">GenericOp&#160;</td>
          <td class="paramname"><em>genericOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>fusableOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> &gt;&#160;</td>
          <td class="paramname"><em>reassociation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01297">1297</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="Matchers_8h_source.html#l00344">mlir::detail::enumerate()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01183">getDomainReassociation()</a>, <a class="el" href="Dialect_2Linalg_2Utils_2Utils_8cpp_source.html#l00235">mlir::linalg::isParallelIterator()</a>, and <a class="el" href="Dialect_2Linalg_2Utils_2Utils_8cpp_source.html#l00239">mlir::linalg::isReductionIterator()</a>.</p>

</div>
</div>
<a id="adf4c97564506872801e2cf3f284f6eb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4c97564506872801e2cf3f284f6eb8">&#9670;&nbsp;</a></span>getCollapsedOpIndexingMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> getCollapsedOpIndexingMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the indexing map in the collapsed op that corresponds to the given <code>indexingMap</code> of the original operation. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01506">1506</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="MLIRContext_8cpp_source.html#l01203">mlir::AffineMap::get()</a>, <a class="el" href="IR_2AffineExpr_8cpp_source.html#l00619">mlir::getAffineDimExpr()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00339">mlir::AffineMap::getContext()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00403">mlir::AffineMap::getResults()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00611">mlir::AffineMap::isProjectedPermutation()</a>.</p>

</div>
</div>
<a id="a378af4e3b09807609f063972a9e82860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a378af4e3b09807609f063972a9e82860">&#9670;&nbsp;</a></span>getCollapsedOpIteratorTypes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;utils::IteratorType&gt; getCollapsedOpIteratorTypes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; utils::IteratorType &gt;&#160;</td>
          <td class="paramname"><em>iteratorTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the iterator types for the collapsed operation given the original iterator types and collapsed dimensions. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01488">1488</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01676">cloneToCollapsedOp&lt; GenericOp &gt;()</a>.</p>

</div>
</div>
<a id="affa46833a5d95d2d5b0fda085bb99038"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affa46833a5d95d2d5b0fda085bb99038">&#9670;&nbsp;</a></span>getCollapsedOpOperand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Value.html">Value</a> getCollapsedOpOperand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Location.html">Location</a>&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>opOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the new value to use for a given <code>OpOperand</code> in the collapsed operation. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01558">1558</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="UseDefLists_8h_source.html#l00160">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00398">mlir::AffineMap::getNumResults()</a>, <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01531">getOperandReassociation()</a>, and <a class="el" href="Value_8h_source.html#l00105">mlir::Value::getType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01625">collapseOperandsAndResults()</a>.</p>

</div>
</div>
<a id="ac4d43306dd817ce8b48fe47442c5dc81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d43306dd817ce8b48fe47442c5dc81">&#9670;&nbsp;</a></span>getDomainReassociation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a> getDomainReassociation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacemlir.html#a7ed845b40509fa999492a04654211321">ReassociationIndicesRef</a>&#160;</td>
          <td class="paramname"><em>rangeReassociation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given list of indices in the range of the <code>indexingMap</code> that are folded, return the indices of the corresponding domain. </p>
<p>Return <code>std::nullopt</code> on failure. Ensures that all the elements of the returned reassociation are distinct. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01183">1183</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00403">mlir::AffineMap::getResults()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00611">mlir::AffineMap::isProjectedPermutation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01297">getCollapsableIterationSpaceDims()</a>.</p>

</div>
</div>
<a id="a31ecc131667ad822fa76bb3b7d63fab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31ecc131667ad822fa76bb3b7d63fab9">&#9670;&nbsp;</a></span>getExpandedShapeAndType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::tuple&lt;<a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a>&gt;, RankedTensorType&gt; getExpandedShapeAndType </td>
          <td>(</td>
          <td class="paramtype">RankedTensorType&#160;</td>
          <td class="paramname"><em>originalType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the shape and type of the operand/result to use in the expanded op given the type in the original op. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00687">687</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="StaticValueUtils_8cpp_source.html#l00215">mlir::decomposeMixedValues()</a>, <a class="el" href="BytecodeImplementation_8h_source.html#l00509">mlir::get()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00403">mlir::AffineMap::getResults()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00865">fuseWithReshapeByExpansion()</a>.</p>

</div>
</div>
<a id="aff1bcc53176a04b539b16e59cbac323e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff1bcc53176a04b539b16e59cbac323e">&#9670;&nbsp;</a></span>getIndexingMapInExpandedOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> getIndexingMapInExpandedOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the indexing map to use in the expanded op for a given the <code>indexingMap</code> of the original operation. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00668">668</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="MLIRContext_8cpp_source.html#l01203">mlir::AffineMap::get()</a>, <a class="el" href="Builders_8h_source.html#l00055">mlir::Builder::getContext()</a>, <a class="el" href="IR_2AffineMap_8cpp_source.html#l00394">mlir::AffineMap::getNumSymbols()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00403">mlir::AffineMap::getResults()</a>.</p>

</div>
</div>
<a id="a19679bdb1cb388e2cf93c2dab27ffe52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19679bdb1cb388e2cf93c2dab27ffe52">&#9670;&nbsp;</a></span>getIndexingMapOfProducerOperandsInCoordinatesOfFusedOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a> getIndexingMapOfProducerOperandsInCoordinatesOfFusedOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>producerOpOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>producerResultIndexMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>fusedConsumerArgIndexMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append to <code>fusedOpIndexingMapAttrs</code> the indexing maps for the operands of the <code>producer</code> to use in the fused operation given the indexing map of the result of the producer in the consumer. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00047">47</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00552">mlir::AffineMap::compose()</a>, <a class="el" href="UseDefLists_8h_source.html#l00038">mlir::detail::IROperandBase::getOwner()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00784">mlir::inversePermutation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00139">mlir::linalg::areElementwiseOpsFusable()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00339">mlir::linalg::fuseElementwiseOps()</a>.</p>

</div>
</div>
<a id="a196f071bfe14a50919431c360987f346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a196f071bfe14a50919431c360987f346">&#9670;&nbsp;</a></span>getOperandReassociation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a>&gt; getOperandReassociation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CollapsingInfo &amp;&#160;</td>
          <td class="paramname"><em>collapsingInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the <code>reassociation</code> indices to use to collapse the operand when the iteration space of a generic op is collapsed. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01531">1531</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00398">mlir::AffineMap::getNumResults()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00407">mlir::AffineMap::getResult()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01712">mlir::linalg::collapseOpIterationDims()</a>, and <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l01558">getCollapsedOpOperand()</a>.</p>

</div>
</div>
<a id="adaaf23f77744995b559eea5f6f3beec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaaf23f77744995b559eea5f6f3beec3">&#9670;&nbsp;</a></span>getReassociationForExpansion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="namespacemlir.html#af66e7b63d5fa8a2a0339c23648a51fbe">ReassociationIndices</a>&gt; getReassociationForExpansion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineMap.html">AffineMap</a>&#160;</td>
          <td class="paramname"><em>indexingMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the reassociation maps to use in the <code>tensor.expand_shape</code> operation to convert the operands of the original operation to operands of the expanded operation. </p>
<p>The same method is used to compute the <code>tensor.collapse_shape</code> used to collapse the result of the expanded op to get the value that can replace all uses of the results of the original op. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00710">710</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00403">mlir::AffineMap::getResults()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00865">fuseWithReshapeByExpansion()</a>.</p>

</div>
</div>
<a id="a8ec57ac31270575195e36ab2ecf09b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ec57ac31270575195e36ab2ecf09b61">&#9670;&nbsp;</a></span>isFusableWithReshapeByDimExpansion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isFusableWithReshapeByDimExpansion </td>
          <td>(</td>
          <td class="paramtype">LinalgOp&#160;</td>
          <td class="paramname"><em>linalgOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>fusableOpOperand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Conditions for folding a structured linalg operation with a reshape op by expanding the iteration space dimensionality for tensor operations. </p>
<p>These are preconditions assumed by <code>foldReshapeByDimExpansion</code> which implements the following fusion pattern.</p>
<p>Consider</p>
<p>c = linalg.generic ins(a, b : memref&lt;?x?x?xf32&gt;, memref&lt;?x?xf32&gt;) indexing_maps = [affine_map&lt;(d0, d1, d2) -&gt; (d1, d0, d2)&gt;, affine_map&lt;(d0, d1, d2) -&gt; (d1, d2)&gt;, affine_map&lt;(d0, d1, d2) -&gt; (d0, d2, d1)&gt;] d = tensor.expand_shape c [[0, 1], [2], [3, 4, 5]] : tensor&lt;?x?x?xf32&gt; into tensor&lt;?x?x?x?x?x?xf32&gt;</p>
<p>The reshape can be folded into the <code>linalgOp</code> if its loop dimensionality is increased to match the result (operand) of the tensor.expand_shape. The indexing_map of the fused tensor in the <code>linalgOp</code> and the reassociation map helps compute the indexing maps of the modified op. For the above example, based on the reassociation map it can be concluded that</p>
<ul>
<li>The loop used to access the first dimension of the fused tensor is split into two.</li>
<li>The loop used to access the second dimension of the fused tensor is kept as is.</li>
<li>The loop used to access the third dimension of the fused tensor is split into three.</li>
</ul>
<p>i.e. (e0, e1, e2, e3, e4) is the domain of the indexing map of the modified op, then</p>
<p>d0 -&gt; e0, e1 d1 -&gt; e2, e3, e4 d2 -&gt; e5</p>
<p>substituting this, the structured op can be rewritten as</p>
<p>d = linalg.generic ins(%0, %1 : ) indexing_maps = [affine_map&lt;(e0, e1, e2, e3, e4, e5) -&gt; (e2, e3, e4, e0, e1, e5)&gt;, affine_map&lt;(e0, e1, e2, e3, e4, e5) -&gt; (e2, e3, e4, e5)&gt;, affine_map&lt;(e0, e1, e2, e3, e4, e5) -&gt; (e0, e1, e5, e2, e3, e4)&gt;]</p>
<p>Since operands to the linalg generic are now 5D, reshapes can be introduced to make it consistent</p>
<p>%0 = tensor.expand_shape a [[0, 1, 2], [3, 4], [5]] : tensor&lt;?x?x?xf32&gt; into tensor&lt;?x?x?x?x?x?xf32&gt; %1 = tensor.expand_shape b [[0, 1, 2], [3]] : tensor&lt;?x?x?xf32&gt; into tensor&lt;?x?x?x?xf32&gt;</p>
<p>The added reshapes are again expanding patterns, so they will get fused with its producers if possible. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00564">564</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00398">mlir::AffineMap::getNumResults()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00865">fuseWithReshapeByExpansion()</a>.</p>

</div>
</div>
<a id="a0e49a564904350d70c1b118d3dfb0f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e49a564904350d70c1b118d3dfb0f6c">&#9670;&nbsp;</a></span>isOpOperandCanBeDroppedAfterFusedLinalgs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isOpOperandCanBeDroppedAfterFusedLinalgs </td>
          <td>(</td>
          <td class="paramtype">GenericOp&#160;</td>
          <td class="paramname"><em>producer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GenericOp&#160;</td>
          <td class="paramname"><em>consumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt;&#160;</td>
          <td class="paramname"><em>opOperandsToIgnore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00079">79</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2AffineMap_8cpp_source.html#l00829">mlir::concatAffineMaps()</a>, and <a class="el" href="IR_2AffineMap_8cpp_source.html#l00784">mlir::inversePermutation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00112">mlir::linalg::getPreservedProducerResults()</a>.</p>

</div>
</div>
<a id="a500dd0360de9862e17d177987cb5a3f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a500dd0360de9862e17d177987cb5a3f5">&#9670;&nbsp;</a></span>updateExpandedGenericOpRegion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void updateExpandedGenericOpRegion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PatternRewriter.html">PatternRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Location.html">Location</a>&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Region.html">Region</a> &amp;&#160;</td>
          <td class="paramname"><em>fusedRegion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExpansionInfo &amp;&#160;</td>
          <td class="paramname"><em>expansionInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the body of an expanded linalg operation having index semantics. </p>
<p>The indices of the original operation need to be recovered by linearizing the indices of the correspoding dimensions of the expanded operation. For now it is assumed that the shapes of the expanded operation needed for linearization are static. </p>

<p class="definition">Definition at line <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00730">730</a> of file <a class="el" href="ElementwiseOpFusion_8cpp_source.html">ElementwiseOpFusion.cpp</a>.</p>

<p class="reference">References <a class="el" href="mlir_2IR_2AffineExpr_8h_source.html#l00311">mlir::bindDims()</a>, <a class="el" href="mlir_2IR_2AffineExpr_8h_source.html#l00325">mlir::bindSymbols()</a>, <a class="el" href="IR_2Region_8h_source.html#l00065">mlir::Region::front()</a>, <a class="el" href="Builders_8h_source.html#l00055">mlir::Builder::getContext()</a>, <a class="el" href="Block_8h_source.html#l00193">mlir::Block::getOps()</a>, <a class="el" href="Dialect_2Arith_2Utils_2Utils_8cpp_source.html#l00111">mlir::getValueOrCreateConstantIndexOp()</a>, <a class="el" href="AffineOps_8cpp_source.html#l01327">mlir::affine::makeComposedFoldedAffineApply()</a>, <a class="el" href="PatternMatch_8cpp_source.html#l00127">mlir::RewriterBase::replaceOp()</a>, and <a class="el" href="Builders_8h_source.html#l00410">mlir::OpBuilder::setInsertionPointAfter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ElementwiseOpFusion_8cpp_source.html#l00805">createExpandedGenericOp()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 1 2025 16:33:28 for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
