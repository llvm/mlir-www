<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Target/SPIRV/Serialization/Serializer.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MLIR<span id="projectnumber">&#160;22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a href="dir_ac3785bb61599da224f3f094ecb2eaf7.html">SPIRV</a></li><li class="navelem"><a href="dir_736469d3b2fe684e005636073e703841.html">Serialization</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Serializer.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="Serializer_8h_source.html">Serializer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SPIRVAttributes_8h_source.html">mlir/Dialect/SPIRV/IR/SPIRVAttributes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SPIRVDialect_8h_source.html">mlir/Dialect/SPIRV/IR/SPIRVDialect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SPIRVEnums_8h_source.html">mlir/Dialect/SPIRV/IR/SPIRVEnums.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SPIRVTypes_8h_source.html">mlir/Dialect/SPIRV/IR/SPIRVTypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="TargetAndABI_8h_source.html">mlir/Dialect/SPIRV/IR/TargetAndABI.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SPIRVBinaryUtils_8h_source.html">mlir/Target/SPIRV/SPIRVBinaryUtils.h</a>&quot;</code><br />
<code>#include &quot;llvm/ADT/STLExtras.h&quot;</code><br />
<code>#include &quot;llvm/ADT/Sequence.h&quot;</code><br />
<code>#include &quot;llvm/ADT/StringExtras.h&quot;</code><br />
<code>#include &quot;llvm/ADT/TypeSwitch.h&quot;</code><br />
<code>#include &quot;llvm/ADT/bit.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &lt;cstdint&gt;</code><br />
<code>#include &lt;optional&gt;</code><br />
</div>
<p><a href="Serializer_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-namespaces" class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:mlir" id="r_mlir"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir.html">mlir</a></td></tr>
<tr class="memdesc:namespacemlir"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include the generated interface declarations. <br /></td></tr>
<tr class="memitem:mlir_3A_3Aspirv" id="r_mlir_3A_3Aspirv"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html">mlir::spirv</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d" id="r_ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;spirv-serialization&quot;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1441f53074934186f1360b7d9265d979" id="r_a1441f53074934186f1360b7d9265d979"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Block.html">Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1441f53074934186f1360b7d9265d979">getStructuredControlFlowOpMergeBlock</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op)</td></tr>
<tr class="memdesc:a1441f53074934186f1360b7d9265d979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the merge block if the given <span class="tt">op</span> is a structured control flow op.  <br /></td></tr>
<tr class="memitem:a4f507a52a78d0f34fbc19262abcc0f4c" id="r_a4f507a52a78d0f34fbc19262abcc0f4c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Block.html">Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f507a52a78d0f34fbc19262abcc0f4c">getPhiIncomingBlock</a> (<a class="el" href="classmlir_1_1Block.html">Block</a> *block)</td></tr>
<tr class="memdesc:a4f507a52a78d0f34fbc19262abcc0f4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a predecessor <span class="tt">block</span> for a block with arguments, returns the block that should be used as the parent block for SPIR-V OpPhi instructions corresponding to the block arguments.  <br /></td></tr>
<tr class="memitem:a704b92a74748215610b0626a99d28744" id="r_a704b92a74748215610b0626a99d28744"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a704b92a74748215610b0626a99d28744">isZeroValue</a> (<a class="el" href="classmlir_1_1Attribute.html">Attribute</a> attr)</td></tr>
<tr class="memitem:a9a09307430af5c24721c9e0aeca00e55" id="r_a9a09307430af5c24721c9e0aeca00e55"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvoid.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a09307430af5c24721c9e0aeca00e55">moveFuncDeclarationsToTop</a> (spirv::ModuleOp moduleOp)</td></tr>
<tr class="memdesc:a9a09307430af5c24721c9e0aeca00e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move all functions declaration before functions definitions.  <br /></td></tr>
<tr class="memitem:a833133e74c83ef32f078b57244466d0c" id="r_a833133e74c83ef32f078b57244466d0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvoid.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#a833133e74c83ef32f078b57244466d0c">mlir::spirv::encodeInstructionInto</a> (<a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; uint32_t &gt; &amp;binary, spirv::Opcode op, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; uint32_t &gt; operands)</td></tr>
<tr class="memdesc:a833133e74c83ef32f078b57244466d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes an SPIR-V instruction with the given <span class="tt">opcode</span> and <span class="tt">operands</span> into the given <span class="tt">binary</span> vector.  <br /></td></tr>
<tr class="memitem:af3f551011baf787c1ab494295dc46083" id="r_af3f551011baf787c1ab494295dc46083"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#af3f551011baf787c1ab494295dc46083">mlir::spirv::getDecorationName</a> (StringRef attrName)</td></tr>
<tr class="memitem:aec8e3d619e0f878e8d96641f0ceb358a" id="r_aec8e3d619e0f878e8d96641f0ceb358a"><td class="memTemplParams" colspan="2">template&lt;typename AttrTy, typename EmitF&gt; </td></tr>
<tr class="memitem:aec8e3d619e0f878e8d96641f0ceb358a template"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#aec8e3d619e0f878e8d96641f0ceb358a">mlir::spirv::processDecorationList</a> (<a class="el" href="classmlir_1_1Location.html">Location</a> loc, Decoration decoration, <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> attrList, StringRef attrName, EmitF emitter)</td></tr>
<tr class="memitem:a0066624e2704755cca3404ab368dbcc3" id="r_a0066624e2704755cca3404ab368dbcc3"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:a0066624e2704755cca3404ab368dbcc3 template"><td class="memItemLeft" align="right" valign="top">LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#a0066624e2704755cca3404ab368dbcc3">mlir::spirv::Serializer::processTypeDecoration&lt; spirv::ArrayType &gt;</a> (<a class="el" href="classmlir_1_1Location.html">Location</a> loc, <a class="el" href="classmlir_1_1spirv_1_1ArrayType.html">spirv::ArrayType</a> type, uint32_t resultID)</td></tr>
<tr class="memitem:ab97cd75646073d697112f7f8cc79c503" id="r_ab97cd75646073d697112f7f8cc79c503"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:ab97cd75646073d697112f7f8cc79c503 template"><td class="memItemLeft" align="right" valign="top">LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#ab97cd75646073d697112f7f8cc79c503">mlir::spirv::Serializer::processTypeDecoration&lt; spirv::RuntimeArrayType &gt;</a> (<a class="el" href="classmlir_1_1Location.html">Location</a> loc, <a class="el" href="classmlir_1_1spirv_1_1RuntimeArrayType.html">spirv::RuntimeArrayType</a> type, uint32_t resultID)</td></tr>
<tr class="memitem:a06d3186b6e52d981d0c6bbf1f3b6bb72" id="r_a06d3186b6e52d981d0c6bbf1f3b6bb72"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Type.html">Type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1spirv.html#a06d3186b6e52d981d0c6bbf1f3b6bb72">mlir::spirv::getValueType</a> (<a class="el" href="classmlir_1_1Attribute.html">Attribute</a> attr)</td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d" name="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&#160;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;spirv-serialization&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Serializer_8cpp_source.html#l00030">30</a> of file <a class="el" href="Serializer_8cpp_source.html">Serializer.cpp</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a4f507a52a78d0f34fbc19262abcc0f4c" name="a4f507a52a78d0f34fbc19262abcc0f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f507a52a78d0f34fbc19262abcc0f4c">&#9670;&#160;</a></span>getPhiIncomingBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1Block.html">Block</a> * getPhiIncomingBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Block.html">Block</a> *</td>          <td class="paramname"><span class="paramname"><em>block</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a predecessor <span class="tt">block</span> for a block with arguments, returns the block that should be used as the parent block for SPIR-V OpPhi instructions corresponding to the block arguments. </p>

<p class="definition">Definition at line <a class="el" href="Serializer_8cpp_source.html#l00047">47</a> of file <a class="el" href="Serializer_8cpp_source.html">Serializer.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8h_source.html#l00213">mlir::Operation::getBlock()</a>, <a class="el" href="Block_8h_source.html#l00137">mlir::Block::getOperations()</a>, <a class="el" href="Block_8cpp_source.html#l00031">mlir::Block::getParentOp()</a>, <a class="el" href="Serializer_8cpp_source.html#l00036">getStructuredControlFlowOpMergeBlock()</a>, and <a class="el" href="Block_8cpp_source.html#l00036">mlir::Block::isEntryBlock()</a>.</p>

</div>
</div>
<a id="a1441f53074934186f1360b7d9265d979" name="a1441f53074934186f1360b7d9265d979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1441f53074934186f1360b7d9265d979">&#9670;&#160;</a></span>getStructuredControlFlowOpMergeBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1Block.html">Block</a> * getStructuredControlFlowOpMergeBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *</td>          <td class="paramname"><span class="paramname"><em>op</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the merge block if the given <span class="tt">op</span> is a structured control flow op. </p>
<p>Otherwise returns nullptr. </p>

<p class="definition">Definition at line <a class="el" href="Serializer_8cpp_source.html#l00036">36</a> of file <a class="el" href="Serializer_8cpp_source.html">Serializer.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Serializer_8cpp_source.html#l00047">getPhiIncomingBlock()</a>.</p>

</div>
</div>
<a id="a704b92a74748215610b0626a99d28744" name="a704b92a74748215610b0626a99d28744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a704b92a74748215610b0626a99d28744">&#9670;&#160;</a></span>isZeroValue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> isZeroValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Attribute.html">Attribute</a></td>          <td class="paramname"><span class="paramname"><em>attr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Serializer_8cpp_source.html#l00073">73</a> of file <a class="el" href="Serializer_8cpp_source.html">Serializer.cpp</a>.</p>

<p class="reference">References <a class="el" href="Serializer_8cpp_source.html#l00073">isZeroValue()</a>, and <a class="el" href="SparseTensorRewriting_8cpp_source.html#l00043">isZeroValue()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Serializer_8cpp_source.html#l00073">isZeroValue()</a>.</p>

</div>
</div>
<a id="a9a09307430af5c24721c9e0aeca00e55" name="a9a09307430af5c24721c9e0aeca00e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a09307430af5c24721c9e0aeca00e55">&#9670;&#160;</a></span>moveFuncDeclarationsToTop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvoid.html">void</a> moveFuncDeclarationsToTop </td>
          <td>(</td>
          <td class="paramtype">spirv::ModuleOp</td>          <td class="paramname"><span class="paramname"><em>moduleOp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move all functions declaration before functions definitions. </p>
<p>In SPIR-V "declarations" are functions without a body and "definitions" functions with a body. This is stronger than necessary. It should be sufficient to ensure any declarations precede their uses and not all definitions, however this allows to avoid analysing every function in the module this way. </p>

<p class="definition">Definition at line <a class="el" href="Serializer_8cpp_source.html#l00097">97</a> of file <a class="el" href="Serializer_8cpp_source.html">Serializer.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8cpp_source.html#l00550">mlir::Operation::moveBefore()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Serializer_8cpp_source.html#l00124">mlir::spirv::Serializer::serialize()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
