<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: mlir::transform::TransformEachOpTrait&lt; OpTy &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemlir.html">mlir</a></li><li class="navelem"><a class="el" href="namespacemlir_1_1transform.html">transform</a></li><li class="navelem"><a class="el" href="classmlir_1_1transform_1_1TransformEachOpTrait.html">TransformEachOpTrait</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classmlir_1_1transform_1_1TransformEachOpTrait-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mlir::transform::TransformEachOpTrait&lt; OpTy &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Trait implementing the TransformOpInterface for operations applying a transformation to a single operation handle and producing an arbitrary number of handles and parameter values.  
 <a href="classmlir_1_1transform_1_1TransformEachOpTrait.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="TransformInterfaces_8h_source.html">mlir/Dialect/Transform/Interfaces/TransformInterfaces.h</a>&quot;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for mlir::transform::TransformEachOpTrait&lt; OpTy &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classmlir_1_1transform_1_1TransformEachOpTrait__inherit__graph.svg" width="346" height="247"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af845e7db5cfedefa62d5ebe8531f6d3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlir_1_1DiagnosedSilenceableFailure.html">DiagnosedSilenceableFailure</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1transform_1_1TransformEachOpTrait.html#af845e7db5cfedefa62d5ebe8531f6d3b">apply</a> (<a class="el" href="classmlir_1_1transform_1_1TransformRewriter.html">transform::TransformRewriter</a> &amp;rewriter, <a class="el" href="classmlir_1_1transform_1_1TransformResults.html">TransformResults</a> &amp;transformResults, <a class="el" href="classmlir_1_1transform_1_1TransformState.html">TransformState</a> &amp;state)</td></tr>
<tr class="memdesc:af845e7db5cfedefa62d5ebe8531f6d3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <code>applyToOne</code> for every payload operation associated with the operand of this transform IR op, the following case disjunction happens:  <a href="classmlir_1_1transform_1_1TransformEachOpTrait.html#af845e7db5cfedefa62d5ebe8531f6d3b">More...</a><br /></td></tr>
<tr class="separator:af845e7db5cfedefa62d5ebe8531f6d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aad475da750712a0406c89a829ea89dc6"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1transform_1_1TransformEachOpTrait.html#aad475da750712a0406c89a829ea89dc6">verifyTrait</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op)</td></tr>
<tr class="memdesc:aad475da750712a0406c89a829ea89dc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks that the op matches the expectations of this trait.  <a href="classmlir_1_1transform_1_1TransformEachOpTrait.html#aad475da750712a0406c89a829ea89dc6">More...</a><br /></td></tr>
<tr class="separator:aad475da750712a0406c89a829ea89dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classmlir_1_1OpTrait_1_1TraitBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classmlir_1_1OpTrait_1_1TraitBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classmlir_1_1OpTrait_1_1TraitBase.html">mlir::OpTrait::TraitBase&lt; OpTy, TransformEachOpTrait &gt;</a></td></tr>
<tr class="memitem:aba6545e9c958929a57b6f37947fab14d inherit pro_methods_classmlir_1_1OpTrait_1_1TraitBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1OpTrait_1_1TraitBase.html#aba6545e9c958929a57b6f37947fab14d">getOperation</a> ()</td></tr>
<tr class="memdesc:aba6545e9c958929a57b6f37947fab14d inherit pro_methods_classmlir_1_1OpTrait_1_1TraitBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the ultimate Operation being worked on.  <a href="classmlir_1_1OpTrait_1_1TraitBase.html#aba6545e9c958929a57b6f37947fab14d">More...</a><br /></td></tr>
<tr class="separator:aba6545e9c958929a57b6f37947fab14d inherit pro_methods_classmlir_1_1OpTrait_1_1TraitBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename OpTy&gt;<br />
class mlir::transform::TransformEachOpTrait&lt; OpTy &gt;</h3>

<p>Trait implementing the TransformOpInterface for operations applying a transformation to a single operation handle and producing an arbitrary number of handles and parameter values. </p>
<p>The op must implement a method with the following signature:</p><ul>
<li><a class="el" href="classmlir_1_1DiagnosedSilenceableFailure.html" title="The result of a transform IR operation application.">DiagnosedSilenceableFailure</a> applyToOne(OpTy, <a class="el" href="classmlir_1_1transform_1_1ApplyToEachResultList.html" title="A list of results of applying a transform op with ApplyEachOpTrait to a single payload operation,...">ApplyToEachResultList</a> &amp;results, <a class="el" href="classmlir_1_1transform_1_1TransformState.html" title="The state maintained across applications of various ops implementing the TransformOpInterface.">TransformState</a> &amp;state) to perform a transformation that is applied in turn to all payload IR operations that correspond to the handle of the transform IR operation. In <code>applyToOne</code>, OpTy is either Operation* or a concrete payload IR <a class="el" href="classmlir_1_1Op.html" title="This provides public APIs that all operations should have.">Op</a> class that the transformation is applied to (and NOT the class of the transform IR op). The <code>applyToOne</code> method takes an empty <code>results</code> vector that it fills with zero, one or multiple operations depending on the number of results expected by the transform op. The number of results must match the number of results of the transform op. <code>applyToOne</code> is allowed to fill the <code>results</code> with all null elements to signify that the transformation did not apply to the payload IR operations. Such null elements are filtered out from results before return.</li>
</ul>
<p>The transform op having this trait is expected to have a single operand. </p>

<p class="definition">Definition at line <a class="el" href="TransformInterfaces_8h_source.html#l01217">1217</a> of file <a class="el" href="TransformInterfaces_8h_source.html">TransformInterfaces.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af845e7db5cfedefa62d5ebe8531f6d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af845e7db5cfedefa62d5ebe8531f6d3b">&#9670;&nbsp;</a></span>apply()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OpTy &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1DiagnosedSilenceableFailure.html">mlir::DiagnosedSilenceableFailure</a> <a class="el" href="classmlir_1_1transform_1_1TransformEachOpTrait.html">mlir::transform::TransformEachOpTrait</a>&lt; OpTy &gt;::apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1transform_1_1TransformRewriter.html">transform::TransformRewriter</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1transform_1_1TransformResults.html">TransformResults</a> &amp;&#160;</td>
          <td class="paramname"><em>transformResults</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1transform_1_1TransformState.html">TransformState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls <code>applyToOne</code> for every payload operation associated with the operand of this transform IR op, the following case disjunction happens: </p>
<ol type="1">
<li>If not target payload ops are associated to the operand then fill the results vector with the expected number of null elements and return success. This is the corner case handling that allows propagating the "no-op" case gracefully to improve usability.</li>
<li>If any <code>applyToOne</code> returns definiteFailure, the transformation is immediately considered definitely failed and we return.</li>
<li>All applications of <code>applyToOne</code> are checked to return a number of results expected by the transform IR op. If not, this is a definite failure and we return early.</li>
<li>If <code>applyToOne</code> produces ops, associate them with the result of this transform op.</li>
<li>If any <code>applyToOne</code> return silenceableFailure, the transformation is considered silenceable.</li>
<li>Otherwise the transformation is considered successful. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="TransformInterfaces_8h_source.html#l01557">1557</a> of file <a class="el" href="TransformInterfaces_8h_source.html">TransformInterfaces.h</a>.</p>

</div>
</div>
<a id="aad475da750712a0406c89a829ea89dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad475da750712a0406c89a829ea89dc6">&#9670;&nbsp;</a></span>verifyTrait()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename OpTy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::LogicalResult <a class="el" href="classmlir_1_1transform_1_1TransformEachOpTrait.html">mlir::transform::TransformEachOpTrait</a>&lt; OpTy &gt;::verifyTrait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks that the op matches the expectations of this trait. </p>

<p class="definition">Definition at line <a class="el" href="TransformInterfaces_8h_source.html#l01613">1613</a> of file <a class="el" href="TransformInterfaces_8h_source.html">TransformInterfaces.h</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8cpp_source.html#l00267">mlir::Operation::emitError()</a>, <a class="el" href="OperationSupport_8h_source.html#l00344">mlir::OperationName::getInterface()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00119">mlir::Operation::getName()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/mlir/Dialect/Transform/Interfaces/<a class="el" href="TransformInterfaces_8h_source.html">TransformInterfaces.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 1 2025 16:33:32 for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
