<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: mlir::ConversionConfig Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemlir.html">mlir</a></li><li class="navelem"><a class="el" href="structmlir_1_1ConversionConfig.html">ConversionConfig</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmlir_1_1ConversionConfig-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mlir::ConversionConfig Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classmlir_1_1Dialect.html" title="Dialects are groups of MLIR operations, types and attributes, as well as behavior associated with the...">Dialect</a> conversion configuration.  
 <a href="structmlir_1_1ConversionConfig.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="DialectConversion_8h_source.html">mlir/Transforms/DialectConversion.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4b8962f2bc950918e8b28a9e4fa93a61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemlir.html#a0bff6226b7c81b6134b8c1130403a172">function_ref</a>&lt; void(<a class="el" href="classmlir_1_1Diagnostic.html">Diagnostic</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#a4b8962f2bc950918e8b28a9e4fa93a61">notifyCallback</a> = nullptr</td></tr>
<tr class="memdesc:a4b8962f2bc950918e8b28a9e4fa93a61"><td class="mdescLeft">&#160;</td><td class="mdescRight">An optional callback used to notify about match failure diagnostics during the conversion.  <a href="structmlir_1_1ConversionConfig.html#a4b8962f2bc950918e8b28a9e4fa93a61">More...</a><br /></td></tr>
<tr class="separator:a4b8962f2bc950918e8b28a9e4fa93a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d66fe4f2264b72747c879ace9730aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#ad6d66fe4f2264b72747c879ace9730aa">unlegalizedOps</a> = nullptr</td></tr>
<tr class="memdesc:ad6d66fe4f2264b72747c879ace9730aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partial conversion only.  <a href="structmlir_1_1ConversionConfig.html#ad6d66fe4f2264b72747c879ace9730aa">More...</a><br /></td></tr>
<tr class="separator:ad6d66fe4f2264b72747c879ace9730aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f49fd8281b89e6cd7c61a2482421ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#a69f49fd8281b89e6cd7c61a2482421ee">legalizableOps</a> = nullptr</td></tr>
<tr class="memdesc:a69f49fd8281b89e6cd7c61a2482421ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analysis conversion only.  <a href="structmlir_1_1ConversionConfig.html#a69f49fd8281b89e6cd7c61a2482421ee">More...</a><br /></td></tr>
<tr class="separator:a69f49fd8281b89e6cd7c61a2482421ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a301c459046e6f79345b2246d0a2a6683"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmlir_1_1RewriterBase_1_1Listener.html">RewriterBase::Listener</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#a301c459046e6f79345b2246d0a2a6683">listener</a> = nullptr</td></tr>
<tr class="memdesc:a301c459046e6f79345b2246d0a2a6683"><td class="mdescLeft">&#160;</td><td class="mdescRight">An optional listener that is notified about all IR modifications in case dialect conversion succeeds.  <a href="structmlir_1_1ConversionConfig.html#a301c459046e6f79345b2246d0a2a6683">More...</a><br /></td></tr>
<tr class="separator:a301c459046e6f79345b2246d0a2a6683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7139334b271fb5933886ea789a47f51"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#ae7139334b271fb5933886ea789a47f51">buildMaterializations</a> = true</td></tr>
<tr class="memdesc:ae7139334b271fb5933886ea789a47f51"><td class="mdescLeft">&#160;</td><td class="mdescRight">If set to "true", the dialect conversion attempts to build source/target materializations through the type converter API in lieu of "builtin.unrealized_conversion_cast ops".  <a href="structmlir_1_1ConversionConfig.html#ae7139334b271fb5933886ea789a47f51">More...</a><br /></td></tr>
<tr class="separator:ae7139334b271fb5933886ea789a47f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b3e493a8d4b17dec5d6a8a6ab47455"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmlir_1_1ConversionConfig.html#a05b3e493a8d4b17dec5d6a8a6ab47455">allowPatternRollback</a> = true</td></tr>
<tr class="memdesc:a05b3e493a8d4b17dec5d6a8a6ab47455"><td class="mdescLeft">&#160;</td><td class="mdescRight">If set to "true", pattern rollback is allowed.  <a href="structmlir_1_1ConversionConfig.html#a05b3e493a8d4b17dec5d6a8a6ab47455">More...</a><br /></td></tr>
<tr class="separator:a05b3e493a8d4b17dec5d6a8a6ab47455"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classmlir_1_1Dialect.html" title="Dialects are groups of MLIR operations, types and attributes, as well as behavior associated with the...">Dialect</a> conversion configuration. </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01162">1162</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a05b3e493a8d4b17dec5d6a8a6ab47455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b3e493a8d4b17dec5d6a8a6ab47455">&#9670;&nbsp;</a></span>allowPatternRollback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mlir::ConversionConfig::allowPatternRollback = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If set to "true", pattern rollback is allowed. </p>
<p>The conversion driver rolls back IR modifications in the following situations.</p>
<ol type="1">
<li><a class="el" href="classmlir_1_1Pattern.html" title="This class contains all of the data related to a pattern, but does not contain any methods or logic f...">Pattern</a> implementation returns "failure" after modifying IR.</li>
<li><a class="el" href="classmlir_1_1Pattern.html" title="This class contains all of the data related to a pattern, but does not contain any methods or logic f...">Pattern</a> produces IR (in-place modification or new IR) that is illegal and cannot be legalized by subsequent foldings / pattern applications.</li>
</ol>
<p>If set to "false", the conversion driver will produce an <a class="el" href="namespacemlir_1_1LLVM.html">LLVM</a> fatal error instead of rolling back IR modifications. Moreover, in case of a failed conversion, the original IR is not restored. The resulting IR may be a mix of original and rewritten IR. (Same as a failed greedy pattern rewrite.)</p>
<p>Note: This flag was added in preparation of the One-Shot <a class="el" href="classmlir_1_1Dialect.html" title="Dialects are groups of MLIR operations, types and attributes, as well as behavior associated with the...">Dialect</a> Conversion refactoring, which will remove the ability to roll back IR modifications from the conversion driver. Use this flag to ensure that your patterns do not trigger any IR rollbacks. For details, see <a href="https://discourse.llvm.org/t/rfc-a-new-one-shot-dialect-conversion-driver/79083">https://discourse.llvm.org/t/rfc-a-new-one-shot-dialect-conversion-driver/79083</a>. </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01242">1242</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DialectConversion_8cpp_source.html#l02851">mlir::OperationConverter::convertOperations()</a>, and <a class="el" href="DialectConversion_8cpp_source.html#l01300">mlir::detail::ConversionPatternRewriterImpl::undoRewrites()</a>.</p>

</div>
</div>
<a id="ae7139334b271fb5933886ea789a47f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7139334b271fb5933886ea789a47f51">&#9670;&nbsp;</a></span>buildMaterializations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mlir::ConversionConfig::buildMaterializations = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If set to "true", the dialect conversion attempts to build source/target materializations through the type converter API in lieu of "builtin.unrealized_conversion_cast ops". </p>
<p>The conversion process fails if at least one materialization could not be built.</p>
<p>If set to "false", the dialect conversion does not build any custom materializations and instead inserts "builtin.unrealized_conversion_cast" ops to ensure that the resulting IR is valid. </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01222">1222</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DialectConversion_8cpp_source.html#l02851">mlir::OperationConverter::convertOperations()</a>.</p>

</div>
</div>
<a id="a69f49fd8281b89e6cd7c61a2482421ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f49fd8281b89e6cd7c61a2482421ee">&#9670;&nbsp;</a></span>legalizableOps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt;<a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt;* mlir::ConversionConfig::legalizableOps = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analysis conversion only. </p>
<p>All operations that are found to be legalizable are placed in this set. Note that no actual rewrites are applied to the IR during an analysis conversion and only pre-existing operations are added to the set. </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01178">1178</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

</div>
</div>
<a id="a301c459046e6f79345b2246d0a2a6683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a301c459046e6f79345b2246d0a2a6683">&#9670;&nbsp;</a></span>listener</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmlir_1_1RewriterBase_1_1Listener.html">RewriterBase::Listener</a>* mlir::ConversionConfig::listener = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An optional listener that is notified about all IR modifications in case dialect conversion succeeds. </p>
<p>If the dialect conversion fails and no IR modifications are visible (i.e., they were all rolled back), or if the dialect conversion is an "analysis conversion", no notifications are sent (apart from <code>notifyPatternBegin</code>/notifyPatternEnd`).</p>
<p>Note: Notifications are sent in a delayed fashion, when the dialect conversion is guaranteed to succeed. At that point, some IR modifications may already have been materialized. Consequently, operations/blocks that are passed to listener callbacks should not be accessed. (Ops/blocks are guaranteed to be valid pointers and accessing op names is allowed. But there are no guarantees about the state of ops/blocks at the time that a callback is triggered.)</p>
<p>Example: Consider a dialect conversion a new op ("test.foo") is created and inserted, and later moved to another block. (Moving ops also triggers "notifyOperationInserted".)</p>
<p>(1) notifyOperationInserted: "test.foo" (into block "b1") (2) notifyOperationInserted: "test.foo" (moved to another block "b2")</p>
<p>When querying "op-&gt;getBlock()" during the first "notifyOperationInserted", "b2" would be returned because "moving an op" is a kind of rewrite that is immediately performed by the dialect conversion (and rolled back upon failure). </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01212">1212</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DialectConversion_8cpp_source.html#l01245">mlir::detail::ConversionPatternRewriterImpl::applyRewrites()</a>, <a class="el" href="DialectConversion_8cpp_source.html#l01416">mlir::detail::ConversionPatternRewriterImpl::applySignatureConversion()</a>, and <a class="el" href="DialectConversion_8cpp_source.html#l02851">mlir::OperationConverter::convertOperations()</a>.</p>

</div>
</div>
<a id="a4b8962f2bc950918e8b28a9e4fa93a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8962f2bc950918e8b28a9e4fa93a61">&#9670;&nbsp;</a></span>notifyCallback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemlir.html#a0bff6226b7c81b6134b8c1130403a172">function_ref</a>&lt;void(<a class="el" href="classmlir_1_1Diagnostic.html">Diagnostic</a> &amp;)&gt; mlir::ConversionConfig::notifyCallback = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An optional callback used to notify about match failure diagnostics during the conversion. </p>
<p>Diagnostics reported to this callback may only be available in debug mode. </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01166">1166</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DialectConversion_8cpp_source.html#l01733">mlir::detail::ConversionPatternRewriterImpl::notifyMatchFailure()</a>.</p>

</div>
</div>
<a id="ad6d66fe4f2264b72747c879ace9730aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d66fe4f2264b72747c879ace9730aa">&#9670;&nbsp;</a></span>unlegalizedOps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt;<a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt;* mlir::ConversionConfig::unlegalizedOps = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partial conversion only. </p>
<p>All operations that are found not to be legalizable are placed in this set. (Note that if there is an op explicitly marked as illegal, the conversion terminates and the set will not necessarily be complete.) </p>

<p class="definition">Definition at line <a class="el" href="DialectConversion_8h_source.html#l01172">1172</a> of file <a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/mlir/Transforms/<a class="el" href="DialectConversion_8h_source.html">DialectConversion.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 1 2025 16:33:30 for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
