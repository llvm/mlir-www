<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/MemRef/Transforms/IndependenceTransforms.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_aa550efc2eb1acee4ac7619e105a3637.html">MemRef</a></li><li class="navelem"><a class="el" href="dir_7c160176e3c77fec20ed947f6385ace4.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">IndependenceTransforms.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mlir_2Dialect_2MemRef_2Transforms_2Transforms_8h_source.html">mlir/Dialect/MemRef/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Affine_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Affine/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2MemRef_2IR_2MemRef_8h_source.html">mlir/Dialect/MemRef/IR/MemRef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ValueBoundsOpInterface_8h_source.html">mlir/Interfaces/ValueBoundsOpInterface.h</a>&quot;</code><br />
</div>
<p><a href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adaaf2a3c0ca3327dd10627a211faa69a"><td class="memItemLeft" align="right" valign="top">static FailureOr&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#adaaf2a3c0ca3327dd10627a211faa69a">makeIndependent</a> (<a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;b, <a class="el" href="classmlir_1_1Location.html">Location</a> loc, <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> ofr, <a class="el" href="classmlir_1_1ValueRange.html">ValueRange</a> independencies)</td></tr>
<tr class="memdesc:adaaf2a3c0ca3327dd10627a211faa69a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the given OpFoldResult independent of all independencies.  <a href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#adaaf2a3c0ca3327dd10627a211faa69a">More...</a><br /></td></tr>
<tr class="separator:adaaf2a3c0ca3327dd10627a211faa69a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af111a7ae9baa39ee0199acdd0d57a8cb"><td class="memItemLeft" align="right" valign="top">static UnrealizedConversionCastOp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#af111a7ae9baa39ee0199acdd0d57a8cb">propagateSubViewOp</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, UnrealizedConversionCastOp conversionOp, SubViewOp op)</td></tr>
<tr class="memdesc:af111a7ae9baa39ee0199acdd0d57a8cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push down an UnrealizedConversionCastOp past a SubViewOp.  <a href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#af111a7ae9baa39ee0199acdd0d57a8cb">More...</a><br /></td></tr>
<tr class="separator:af111a7ae9baa39ee0199acdd0d57a8cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fbf69bece27b64656b212300c5c732"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#ac0fbf69bece27b64656b212300c5c732">replaceAndPropagateMemRefType</a> (<a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;rewriter, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *from, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *to)</td></tr>
<tr class="memdesc:ac0fbf69bece27b64656b212300c5c732"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an original op and a new, modified op with the same number of results, whose memref return types may differ, replace all uses of the original op with the new op and propagate the new memref types through the IR.  <a href="MemRef_2Transforms_2IndependenceTransforms_8cpp.html#ac0fbf69bece27b64656b212300c5c732">More...</a><br /></td></tr>
<tr class="separator:ac0fbf69bece27b64656b212300c5c732"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="adaaf2a3c0ca3327dd10627a211faa69a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaaf2a3c0ca3327dd10627a211faa69a">&#9670;&nbsp;</a></span>makeIndependent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FailureOr&lt;<a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a>&gt; makeIndependent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">OpBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Location.html">Location</a>&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a>&#160;</td>
          <td class="paramname"><em>ofr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1ValueRange.html">ValueRange</a>&#160;</td>
          <td class="paramname"><em>independencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make the given OpFoldResult independent of all independencies. </p>

<p class="definition">Definition at line <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00019">19</a> of file <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html">IndependenceTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="ValueBoundsOpInterface_8cpp_source.html#l00596">mlir::ValueBoundsConstraintSet::computeIndependentBound()</a>, <a class="el" href="Affine_2Transforms_2ReifyValueBounds_8cpp_source.html#l00034">mlir::affine::materializeComputedBound()</a>, and <a class="el" href="namespacemlir_1_1presburger.html#a04de81efca09b0849dde1d037c6e841da9d02262ac7b9cb33f0c3a8c2f9cf6edc">mlir::presburger::UB</a>.</p>

</div>
</div>
<a id="af111a7ae9baa39ee0199acdd0d57a8cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af111a7ae9baa39ee0199acdd0d57a8cb">&#9670;&nbsp;</a></span>propagateSubViewOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static UnrealizedConversionCastOp propagateSubViewOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UnrealizedConversionCastOp&#160;</td>
          <td class="paramname"><em>conversionOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SubViewOp&#160;</td>
          <td class="paramname"><em>op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push down an UnrealizedConversionCastOp past a SubViewOp. </p>

<p class="definition">Definition at line <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00066">66</a> of file <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html">IndependenceTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="Builders_8h_source.html#l00089">mlir::Builder::getType()</a>, <a class="el" href="PatternMatch_8h_source.html#l00636">mlir::RewriterBase::replaceAllUsesWith()</a>, and <a class="el" href="Builders_8h_source.html#l00396">mlir::OpBuilder::setInsertionPoint()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00096">replaceAndPropagateMemRefType()</a>.</p>

</div>
</div>
<a id="ac0fbf69bece27b64656b212300c5c732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fbf69bece27b64656b212300c5c732">&#9670;&nbsp;</a></span>replaceAndPropagateMemRefType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void replaceAndPropagateMemRefType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1RewriterBase.html">RewriterBase</a> &amp;&#160;</td>
          <td class="paramname"><em>rewriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an original op and a new, modified op with the same number of results, whose memref return types may differ, replace all uses of the original op with the new op and propagate the new memref types through the IR. </p>
<p>Example: from = memref.alloca(sz) : memref&lt;?xf32&gt; to = memref.subview ... : ... to memref&lt;?xf32, strided&lt;[1], offset: ?&gt;&gt; memref.store cst, from[c0] : memref&lt;?xf32&gt;</p>
<p>In the above example, all uses of from are replaced with to. This can be done directly for ops such as memref.store. For ops that have memref results (e.g., memref.subview), the result type may depend on the operand type, so we cannot just replace all uses. There is special handling for common memref ops. For all other ops, unrealized_conversion_cast is inserted. </p>

<p class="definition">Definition at line <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00096">96</a> of file <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html">IndependenceTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="Matchers_8h_source.html#l00344">mlir::detail::enumerate()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00223">mlir::Operation::getLoc()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00404">mlir::Operation::getNumResults()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00407">mlir::Operation::getResult()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00415">mlir::Operation::getResults()</a>, <a class="el" href="PatternMatch_8h_source.html#l00628">mlir::RewriterBase::modifyOpInPlace()</a>, <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00066">propagateSubViewOp()</a>, <a class="el" href="PatternMatch_8h_source.html#l00636">mlir::RewriterBase::replaceAllUsesWith()</a>, and <a class="el" href="Builders_8h_source.html#l00410">mlir::OpBuilder::setInsertionPointAfter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MemRef_2Transforms_2IndependenceTransforms_8cpp_source.html#l00166">mlir::memref::replaceWithIndependentOp()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 1 2025 16:33:28 for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
