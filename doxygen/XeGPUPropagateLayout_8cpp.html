<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/XeGPU/Transforms/XeGPUPropagateLayout.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MLIR<span id="projectnumber">&#160;22.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a href="dir_4450d9c2fe676127035a85de624b54cb.html">XeGPU</a></li><li class="navelem"><a href="dir_2c7c141a96fa7a5cbbd680608daa3825.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">XeGPUPropagateLayout.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="DeadCodeAnalysis_8h_source.html">mlir/Analysis/DataFlow/DeadCodeAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SparseAnalysis_8h_source.html">mlir/Analysis/DataFlow/SparseAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Analysis_2DataFlow_2Utils_8h_source.html">mlir/Analysis/DataFlow/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DataFlowFramework_8h_source.html">mlir/Analysis/DataFlowFramework.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="GPUDialect_8h_source.html">mlir/Dialect/GPU/IR/GPUDialect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2MemRef_2IR_2MemRef_8h_source.html">mlir/Dialect/MemRef/IR/MemRef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="VectorOps_8h_source.html">mlir/Dialect/Vector/IR/VectorOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="XeGPU_8h_source.html">mlir/Dialect/XeGPU/IR/XeGPU.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dialect_2XeGPU_2Transforms_2Passes_8h_source.html">mlir/Dialect/XeGPU/Transforms/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="XeGPUUtils_8h_source.html">mlir/Dialect/XeGPU/Utils/XeGPUUtils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Attributes_8h_source.html">mlir/IR/Attributes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Builders_8h_source.html">mlir/IR/Builders.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2IR_2BuiltinAttributes_8h_source.html">mlir/IR/BuiltinAttributes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2IR_2BuiltinTypes_8h_source.html">mlir/IR/BuiltinTypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2Operation_8h_source.html">mlir/IR/Operation.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Value_8h_source.html">mlir/IR/Value.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Visitors_8h_source.html">mlir/IR/Visitors.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ControlFlowInterfaces_8h_source.html">mlir/Interfaces/ControlFlowInterfaces.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FunctionInterfaces_8h_source.html">mlir/Interfaces/FunctionInterfaces.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Support_2LLVM_8h_source.html">mlir/Support/LLVM.h</a>&quot;</code><br />
<code>#include &quot;llvm/ADT/ArrayRef.h&quot;</code><br />
<code>#include &quot;llvm/ADT/STLExtras.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallVector.h&quot;</code><br />
<code>#include &quot;llvm/ADT/TypeSwitch.h&quot;</code><br />
<code>#include &quot;llvm/Support/Casting.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &quot;llvm/Support/LogicalResult.h&quot;</code><br />
<code>#include &quot;llvm/Support/raw_ostream.h&quot;</code><br />
<code>#include &quot;<a class="el" href="IntelGpuXe2_8h_source.html">mlir/Dialect/XeGPU/uArch/IntelGpuXe2.h</a>&quot;</code><br />
<code>#include &quot;mlir/Dialect/XeGPU/Transforms/Passes.h.inc&quot;</code><br />
</div>
<p><a href="XeGPUPropagateLayout_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:mlir_3A_3Axegpu_3A_3Aimpl_3A_3AXeGPUPropagateLayoutBase_3C_20DerivedT_20_3E" id="r_mlir_3A_3Axegpu_3A_3Aimpl_3A_3AXeGPUPropagateLayoutBase_3C_20DerivedT_20_3E"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1xegpu_1_1impl_1_1XeGPUPropagateLayoutBase.html">mlir::xegpu::impl::XeGPUPropagateLayoutBase&lt; DerivedT &gt;</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-namespaces" class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:mlir" id="r_mlir"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir.html">mlir</a></td></tr>
<tr class="memdesc:namespacemlir"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include the generated interface declarations. <br /></td></tr>
<tr class="memitem:mlir_3A_3Axegpu" id="r_mlir_3A_3Axegpu"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu.html">mlir::xegpu</a></td></tr>
<tr class="memitem:mlir_3A_3Axegpu_3A_3Aimpl" id="r_mlir_3A_3Axegpu_3A_3Aimpl"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu_1_1impl.html">mlir::xegpu::impl</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5e7dc7abd6ae1e24e5cb492a8fd7305f" id="r_a5e7dc7abd6ae1e24e5cb492a8fd7305f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e7dc7abd6ae1e24e5cb492a8fd7305f">GEN_PASS_DEF_XEGPUPROPAGATELAYOUT</a></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d" id="r_ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;xegpu-propagate-layout&quot;</td></tr>
<tr class="memitem:ae0bb487c37194ac844a13205a7edcefc" id="r_ae0bb487c37194ac844a13205a7edcefc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0bb487c37194ac844a13205a7edcefc">DBGS</a>()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a58e4e5d8bfa3ce5de591182bf1d85bba" id="r_a58e4e5d8bfa3ce5de591182bf1d85bba"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a> = <a class="el" href="namespacemlir.html#aeb139bbbd94ce3525f61d508772f5d69">function_ref</a>&lt;xegpu::DistributeLayoutAttr(<a class="el" href="classmlir_1_1Value.html">Value</a>)&gt;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aefbc0e507fa88001b02ba30f9ccdb5f4" id="r_aefbc0e507fa88001b02ba30f9ccdb5f4"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt;<a class="el" href="classmlir_1_1Pass.html">::mlir::Pass</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu_1_1impl.html#aefbc0e507fa88001b02ba30f9ccdb5f4">mlir::xegpu::impl::createXeGPUPropagateLayout</a> ()</td></tr>
<tr class="memitem:ad305add3574cb0a0643891b7352d8a8c" id="r_ad305add3574cb0a0643891b7352d8a8c"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt;<a class="el" href="classmlir_1_1Pass.html">::mlir::Pass</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu_1_1impl.html#ad305add3574cb0a0643891b7352d8a8c">mlir::xegpu::impl::createXeGPUPropagateLayout</a> (<a class="el" href="structmlir_1_1xegpu_1_1XeGPUPropagateLayoutOptions.html">XeGPUPropagateLayoutOptions</a> <a class="el" href="PassManagerOptions_8cpp.html#a565f4d58c99c19dde9d8fb7d12fd8a16">options</a>)</td></tr>
<tr class="memitem:af151cb970a71e5e0f030af9c829580fd" id="r_af151cb970a71e5e0f030af9c829580fd"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt;<a class="el" href="classmlir_1_1Pass.html">::mlir::Pass</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu.html#af151cb970a71e5e0f030af9c829580fd">mlir::xegpu::createXeGPUPropagateLayout</a> ()</td></tr>
<tr class="memitem:a379e7abd2029bd1cae2c8e304524be08" id="r_a379e7abd2029bd1cae2c8e304524be08"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt;<a class="el" href="classmlir_1_1Pass.html">::mlir::Pass</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemlir_1_1xegpu.html#a379e7abd2029bd1cae2c8e304524be08">mlir::xegpu::createXeGPUPropagateLayout</a> (<a class="el" href="structmlir_1_1xegpu_1_1XeGPUPropagateLayoutOptions.html">XeGPUPropagateLayoutOptions</a> <a class="el" href="PassManagerOptions_8cpp.html#a565f4d58c99c19dde9d8fb7d12fd8a16">options</a>)</td></tr>
<tr class="memitem:abc382893a51ad62af8afb28f74ba0555" id="r_abc382893a51ad62af8afb28f74ba0555"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc382893a51ad62af8afb28f74ba0555">updateOp</a> (<a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;builder, <a class="el" href="classmlir_1_1Operation.html">mlir::Operation</a> *op, <a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a> getLayoutOfValue)</td></tr>
<tr class="memdesc:abc382893a51ad62af8afb28f74ba0555"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update an operation with the layout of its results.  <br /></td></tr>
<tr class="memitem:a0faa29f1e3d5d64f3d70522b28a8f37e" id="r_a0faa29f1e3d5d64f3d70522b28a8f37e"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0faa29f1e3d5d64f3d70522b28a8f37e">updateControlFlowOps</a> (<a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;builder, mlir::RegionBranchTerminatorOpInterface terminator, <a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a> getLayoutOfValue)</td></tr>
<tr class="memdesc:a0faa29f1e3d5d64f3d70522b28a8f37e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classmlir_1_1Region.html" title="This class contains a list of basic blocks and a link to the parent operation it is attached to.">Region</a> ops like scf.for need special handling because they have blocks inside.  <br /></td></tr>
<tr class="memitem:afe0e18c279590c95e9b3d9e943841d21" id="r_afe0e18c279590c95e9b3d9e943841d21"><td class="memItemLeft" align="right" valign="top">static LogicalResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe0e18c279590c95e9b3d9e943841d21">updateFunctionOpInterface</a> (<a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;builder, mlir::FunctionOpInterface funcOp, <a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a> getLayoutOfValue)</td></tr>
<tr class="memdesc:afe0e18c279590c95e9b3d9e943841d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the function arguments and results with the layouts.  <br /></td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ae0bb487c37194ac844a13205a7edcefc" name="ae0bb487c37194ac844a13205a7edcefc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bb487c37194ac844a13205a7edcefc">&#9670;&#160;</a></span>DBGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBGS</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(llvm::dbgs() &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> <a class="code hl_define" href="LocalAliasAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a> <span class="stringliteral">&quot;]: &quot;</span>)</div>
<div class="ttc" id="aLocalAliasAnalysis_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LocalAliasAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition</b> <a href="LocalAliasAnalysis_8cpp_source.html#l00032">LocalAliasAnalysis.cpp:32</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l00049">49</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

</div>
</div>
<a id="ad78e062f62e0d6e453941fb4ca843e4d" name="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&#160;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;xegpu-propagate-layout&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l00048">48</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

</div>
</div>
<a id="a5e7dc7abd6ae1e24e5cb492a8fd7305f" name="a5e7dc7abd6ae1e24e5cb492a8fd7305f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e7dc7abd6ae1e24e5cb492a8fd7305f">&#9670;&#160;</a></span>GEN_PASS_DEF_XEGPUPROPAGATELAYOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GEN_PASS_DEF_XEGPUPROPAGATELAYOUT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l00043">43</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

</div>
</div>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="a58e4e5d8bfa3ce5de591182bf1d85bba" name="a58e4e5d8bfa3ce5de591182bf1d85bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e4e5d8bfa3ce5de591182bf1d85bba">&#9670;&#160;</a></span>GetLayoutFnTy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a> = <a class="el" href="namespacemlir.html#aeb139bbbd94ce3525f61d508772f5d69">function_ref</a>&lt;xegpu::DistributeLayoutAttr(<a class="el" href="classmlir_1_1Value.html">Value</a>)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l01140">1140</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a0faa29f1e3d5d64f3d70522b28a8f37e" name="a0faa29f1e3d5d64f3d70522b28a8f37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0faa29f1e3d5d64f3d70522b28a8f37e">&#9670;&#160;</a></span>updateControlFlowOps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogicalResult updateControlFlowOps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>builder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mlir::RegionBranchTerminatorOpInterface</td>          <td class="paramname"><span class="paramname"><em>terminator</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a></td>          <td class="paramname"><span class="paramname"><em>getLayoutOfValue</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classmlir_1_1Region.html" title="This class contains a list of basic blocks and a link to the parent operation it is attached to.">Region</a> ops like scf.for need special handling because they have blocks inside. </p>
<p>If the blocks have tensor descriptor type as block arguments, thier types must be updated. Also region op can have results that may not have any users (e.g. A and B tiles). They are not assigned a layout by layout analysis because they have no users. However inside the region op corresponding block arguments for these results do have layouts. Therefore, in this case we still need to update the result types with the layout attribute. This function function updates the internal block arguments and the result types of the region op with the assigned layouts. clang-format off Example: scf.for ... iter_args(...) -&gt; (out types) { ^bb0(block types): ... scf.yield ... : (yield types) } clang-format on In this example, at scf.yield, control-flow can transfer to two successor regions. One is the ^bb0 (for loop body) and the other is the scf.for op itself (yield the results). So we update both the block arguments of the successor region (i.e. block types) and the result types of the scf.for op (i.e. out types). Note that yield types are updated by respective producers inside bb0. </p>

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l01204">1204</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

<p class="reference">References <a class="el" href="Hoisting_8cpp_source.html#l00032">DBGS</a>, <a class="el" href="LinalgTransformOps_8cpp_source.html#l02098">result</a>, <a class="el" href="XeGPUUtils_8cpp_source.html#l00222">mlir::xegpu::setDistributeLayoutAttr()</a>, and <a class="el" href="AffineAnalysis_8cpp.html#aa2afc59a21f80839c29f2812f75c36a4">success()</a>.</p>

</div>
</div>
<a id="afe0e18c279590c95e9b3d9e943841d21" name="afe0e18c279590c95e9b3d9e943841d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0e18c279590c95e9b3d9e943841d21">&#9670;&#160;</a></span>updateFunctionOpInterface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogicalResult updateFunctionOpInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>builder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mlir::FunctionOpInterface</td>          <td class="paramname"><span class="paramname"><em>funcOp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a></td>          <td class="paramname"><span class="paramname"><em>getLayoutOfValue</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the function arguments and results with the layouts. </p>

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l01265">1265</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

<p class="reference">References <a class="el" href="Hoisting_8cpp_source.html#l00032">DBGS</a>, and <a class="el" href="AffineAnalysis_8cpp.html#aa2afc59a21f80839c29f2812f75c36a4">success()</a>.</p>

</div>
</div>
<a id="abc382893a51ad62af8afb28f74ba0555" name="abc382893a51ad62af8afb28f74ba0555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc382893a51ad62af8afb28f74ba0555">&#9670;&#160;</a></span>updateOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogicalResult updateOp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpBuilder.html">mlir::OpBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>builder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">mlir::Operation</a> *</td>          <td class="paramname"><span class="paramname"><em>op</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a58e4e5d8bfa3ce5de591182bf1d85bba">GetLayoutFnTy</a></td>          <td class="paramname"><span class="paramname"><em>getLayoutOfValue</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update an operation with the layout of its results. </p>
<p>If the result type is a vector type, a temporary layout attribute is added to the operation. If the result type is a tensor descriptor type, the type is updated with the layout attribute. The users of the result are also updated with the layout attribute. </p>

<p class="definition">Definition at line <a class="el" href="XeGPUPropagateLayout_8cpp_source.html#l01146">1146</a> of file <a class="el" href="XeGPUPropagateLayout_8cpp_source.html">XeGPUPropagateLayout.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8cpp_source.html#l00280">mlir::Operation::emitWarning()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00415">mlir::Operation::getResults()</a>, <a class="el" href="LinalgTransformOps_8cpp_source.html#l02098">result</a>, <a class="el" href="XeGPUUtils_8cpp_source.html#l00222">mlir::xegpu::setDistributeLayoutAttr()</a>, and <a class="el" href="AffineAnalysis_8cpp.html#aa2afc59a21f80839c29f2812f75c36a4">success()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on <span class="timestamp"></span> for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
